Jun-20 15:14:13.626 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf --STAR_INDEX /Users/vikas/Documents/UCSC/lab/kim_lab/exoTE/test/starTestIndex --ILLUMINA --PAIRED_END --INPUT_FOLDER test_fastq_single_small/ --OUTPUT test_output -resume -with-docker 'ubuntu:18.04' --REPEAT_GTF /Users/vikas/Documents/UCSC/lab/kim_lab/refs/all_repeats_unique_gene_id.gtf --GENOMIC_GTF /Users/vikas/Documents/UCSC/lab/kim_lab/refs/gencode.v38.annotation.gtf
Jun-20 15:14:13.757 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 20.07.1
Jun-20 15:14:13.773 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [thirsty_stallman] - revision: 9b0fb739b7
Jun-20 15:14:13.802 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /Users/vikas/Documents/UCSC/lab/kim_lab/exoTE/nextflow.config
Jun-20 15:14:13.803 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /Users/vikas/Documents/UCSC/lab/kim_lab/exoTE/nextflow.config
Jun-20 15:14:13.843 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Jun-20 15:14:14.331 [main] DEBUG nextflow.config.ConfigBuilder - Enabling execution in Docker container as requested by cli option `-with-docker ubuntu:18.04`
Jun-20 15:14:14.391 [main] DEBUG nextflow.Session - Session uuid: 03521f27-a505-409e-9544-ab822574eb4d
Jun-20 15:14:14.391 [main] DEBUG nextflow.Session - Run name: thirsty_stallman
Jun-20 15:14:14.392 [main] DEBUG nextflow.Session - Executor pool size: 8
Jun-20 15:14:14.413 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 20.07.1 build 5412
  Created: 24-07-2020 15:18 UTC (08:18 PDT)
  System: Mac OS X 10.15.7
  Runtime: Groovy 2.5.11 on Java HotSpot(TM) 64-Bit Server VM 1.8.0_144-b01
  Encoding: UTF-8 (UTF-8)
  Process: 39324@MacBook-Pro-2.local [127.0.0.1]
  CPUs: 8 - Mem: 16 GB (509.8 MB) - Swap: 7 GB (1.2 GB)
Jun-20 15:14:14.532 [main] DEBUG nextflow.Session - Work-dir: /Users/vikas/Documents/UCSC/lab/kim_lab/exoTE/work [Mac OS X]
Jun-20 15:14:14.598 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Jun-20 15:14:14.600 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Jun-20 15:14:14.787 [main] DEBUG nextflow.Session - Session start invoked
Jun-20 15:14:15.120 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jun-20 15:14:15.396 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: Star_PE, Fastp_PE, Chromoplots, Minimap2, Star_SE, Fastp_SE, Rename
Jun-20 15:14:15.574 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jun-20 15:14:15.574 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jun-20 15:14:15.579 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Jun-20 15:14:15.586 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=8; memory=16 GB; capacity=7; pollInterval=100ms; dumpInterval=5m
Jun-20 15:14:15.688 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jun-20 15:14:15.688 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jun-20 15:14:15.709 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jun-20 15:14:15.710 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jun-20 15:14:15.720 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Jun-20 15:14:15.721 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Jun-20 15:14:15.726 [main] DEBUG nextflow.Session - Ignite dataflow network (6)
Jun-20 15:14:15.737 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: test_fastq_single_small/; pattern: **_R{1,2}*.fastq.gz; options: [:]
Jun-20 15:14:15.738 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Fastp_PE
Jun-20 15:14:15.739 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Star_PE
Jun-20 15:14:15.739 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Rename
Jun-20 15:14:15.740 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > Chromoplots
Jun-20 15:14:15.741 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
Jun-20 15:14:15.741 [main] DEBUG nextflow.Session - Session await
Jun-20 15:14:15.910 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-20 15:14:15.917 [Task submitter] INFO  nextflow.Session - [fd/dba044] Submitted process > Rename
Jun-20 15:14:16.975 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: Rename; status: COMPLETED; exit: 1; error: -; workDir: /Users/vikas/Documents/UCSC/lab/kim_lab/exoTE/work/fd/dba044b234a28fc9dca6012f92e93d]
Jun-20 15:14:17.008 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'Rename'

Caused by:
  Process `Rename` terminated with an error exit status (1)

Command executed:

  #!/bin/bash
  
  #logging
  echo "ls of directory" 
  ls -lah 
  
  count=`ls -1 *.sam 2>/dev/null | wc -l`
  if [ $count != 0 ]
  then 
  echo "running samtools for nanopore file"
  for i in *.sam
  do
  base=`basename -s ".bam" $i` 
  samtools view -Sb -@ 1 $i > $base.bam
  done
  fi 
  
  for i in *.bam
  do
  newbase=`echo $i | cut -f1 -d .`
  mv $i $newbase.bam
  done

Command exit status:
  1

Command output:
  ls of directory
  total 16K
  drwxr-xrwx 8 root root  256 Jun 20 22:14 .
  drwxr-xr-x 3 root root   96 Jun 20 22:14 ..
  -rw-r--r-- 1 root root    0 Jun 20 22:14 .command.begin
  -rw-r--r-- 1 root root    0 Jun 20 22:14 .command.err
  -rw-r--r-- 1 root root   16 Jun 20 22:14 .command.log
  -rw-r--r-- 1 root root   16 Jun 20 22:14 .command.out
  -rw-r--r-- 1 root root 3.0K Jun 20 22:14 .command.run
  -rw-r--r-- 1 root root  334 Jun 20 22:14 .command.sh

Command error:
  mv: cannot stat '*.bam': No such file or directory

Work dir:
  /Users/vikas/Documents/UCSC/lab/kim_lab/exoTE/work/fd/dba044b234a28fc9dca6012f92e93d

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line
Jun-20 15:14:17.016 [main] DEBUG nextflow.Session - Session await > all process finished
Jun-20 15:14:17.019 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `Rename` terminated with an error exit status (1)
Jun-20 15:14:17.043 [main] DEBUG nextflow.Session - Session await > all barriers passed
Jun-20 15:14:17.066 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=965ms; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
Jun-20 15:14:17.249 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
Jun-20 15:14:17.265 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
